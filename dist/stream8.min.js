'use strict';(function(){function f(a,b){"undefined"==typeof b&&(b=function(){return d.empty()});this.head=a;this.tail=b}function k(a,b){f.call(this,a,b)}var g=function(a,b,c){return"StreamImpl"==typeof a?new f(b,c):new k(b,c)},h=function(a){return void 0===a||null===a||l(a)},l=function(a){return"number"==typeof a&&isNaN(parseInt(a))},m=function(a,b){if(a===b)return!0;if(void 0===a||void 0===b||null===a||null===b)return!1;var c=typeof a;if(c!==typeof b)return!1;var e=l(a),d=l(b);if(e&&d)return!0;
if(e||d||"string"===c||"number"===c||"function"===c)return!1;if((c=Array.isArray(a))&&Array.isArray(b)){if(a.length!==b.length)return!1;for(c=0;c<a.length;c++)if(!m(a[c],b[c]))return!1;return!0}if(c)return!1;e=Object.keys(a);if(e.length!==Object.keys(b).length)return!1;for(c=0;c<e.length;c++)if(d=e[c],!m(a[d],b[d]))return!1;return!0};f.prototype={average:function(){var a=0,b=0;this.forEach(function(c){isNaN(c)||(a++,b+=c)});return 0===a?0:b/a},collect:function(a){var b={};this.forEach(function(c){var e=
h(c)?void 0:a(c);b.hasOwnProperty(e)||(b[e]=[]);b[e][b[e].length]=c});return b},collectFirst:function(a){var b={};this.forEach(function(c){var e=h(c)?void 0:a(c);b.hasOwnProperty(e)||(b[e]=c)});return b},contains:function(a){return this.forEach(function(b){if(m(a,b))return!0},!1)},count:function(){return this.isEmpty()?0:this.tail().count()+1},distinct:function(){},isEmpty:function(){return"undefined"==typeof this.head},filter:function(a){if(this.isEmpty())return this;var b=this.head;if(!h(b)&&a(b)){var c=
this;return g(this,b,function(){return c.tail().filter(a)})}return this.tail().filter(a)},findFirst:function(){return this.head},flatMap:function(a){return this.isEmpty()?this:h(this.head)?this.tail().flatMap(a):d.concat(a(this.head).stream(),this.tail().flatMap(a))},forEach:function(a,b,c){void 0===c&&(c=0);if(this.isEmpty())return b;var e=a(this.head,c++);if(void 0!==e)return e;var d=this.tail();void 0!==d&&(e=d.forEach(a,b,c));return e?e:b},limit:function(a){if(1>a||this.isEmpty())return d.empty();
var b=this;return g(this,this.head,function(){return b.tail().limit(--a)})},map:function(a){if(this.isEmpty())return this;if(h(this.head))return this.tail().map(a);var b=this;return g(this,a(this.head),function(){return b.tail().map(a)})},toArray:function(){var a=[];this.forEach(function(b){a[a.length]=b});return a},toString:function(){var a="[stream={ ";this.forEach(function(b){a+="'"+b+"' "});return a+"}]"},skip:function(a){for(var b=this,c=0;c<a;c++){if(b.isEmpty())return d.empty();b=b.tail()}return b.isEmpty()?
d.empty():g(b,b.head,b.tail)},sum:function(){return this.isEmpty()?0:isNaN(this.head)?this.tail().sum():this.head+this.tail().sum()}};k.prototype=Object.create(f.prototype);k.prototype.isEmpty=function(){return!1};var d={concat:function(a,b){return a.isEmpty()?b:g(a,a.head,function(){return d.concat(a.tail(),b)})},empty:function(){return new f},generate:function(a){var b=a.get();return void 0===b?this.empty():new f(b,function(){return d.generate(a)})},range:function(a,b){void 0===a&&(a=1);return d.generate({low:a,
high:b,get:function(){return void 0!==this.high&&this.low>this.high?void 0:this.low++}})}};Array.prototype.stream||(Array.prototype.stream=function(){if(0===this.length)return d.empty();var a=this;return new k(this[0],function(){var b=a.slice(1);return void 0===b||0===b.length?d.empty():b.stream()})});"undefined"!==typeof module&&module.exports?module.exports=d:self.Stream=d})();
