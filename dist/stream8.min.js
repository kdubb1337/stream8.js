'use strict';(function(){function f(b,a){"undefined"==typeof a&&(a=function(){return d.empty()});this.head=b;this.tail=a}function g(b,a){f.call(this,b,a)}var h=function(b,a,c){return"StreamImpl"==typeof b?new f(a,c):new g(a,c)},k=function(b){return"number"==typeof b&&!isNaN(b)};f.prototype={average:function(){var b=0,a=0;this.forEach(function(c){k(c)&&(b++,a+=c)});return 0===b?0:a/b},count:function(){return this.isEmpty()?0:this.tail().count()+1},collect:function(b){var a={};this.forEach(function(c){var e=
b(c);a.hasOwnProperty(e)||(a[e]=[]);a[e][a[e].length]=c});return a},collectFirst:function(b){var a={};this.forEach(function(c){var e=b(c);a.hasOwnProperty(e)||(a[e]=c)});return a},isEmpty:function(){return"undefined"==typeof this.head},filter:function(b){if(this.isEmpty())return this;var a=this.head;if(b(a)){var c=this;return h(this,a,function(){return c.tail().filter(b)})}return this.tail().filter(b)},forEach:function(b,a,c){void 0===c&&(c=0);if(this.isEmpty())return a;var e=b(this.head,c++);if(void 0!==
e)return e;var d=this.tail();void 0!==d&&(e=d.forEach(b,a,c));return e?e:a},limit:function(b){if(1>b||this.isEmpty())return d.empty();var a=this;return h(this,this.head,function(){return a.tail().limit(--b)})},map:function(b){if(this.isEmpty())return d.empty();var a=this;return h(this,b(this.head),function(){return a.tail().map(b)})},toArray:function(){var b=[];this.forEach(function(a){b[b.length]=a});return b},toString:function(){var b="[stream={ ";this.forEach(function(a){b+="'"+a+"' "});return b+
"}]"},skip:function(b){for(var a=this,c=0;c<b;c++){if(a.isEmpty())return d.empty();a=a.tail()}return a.isEmpty()?d.empty():h(a,a.head,a.tail)},sum:function(){return this.isEmpty()?0:k(this.head)?this.head+this.tail().sum():this.tail().sum()}};g.prototype=Object.create(f.prototype);g.prototype.isEmpty=function(){return!1};var d={empty:function(){return new f},generate:function(b){var a=b.get();return void 0===a?this.empty():new f(a,function(){return d.generate(b)})},range:function(b,a){void 0===b&&
(b=1);return d.generate({low:b,high:a,get:function(){return void 0!==this.high&&this.low>this.high?void 0:this.low++}})}};Array.prototype.stream||(Array.prototype.stream=function(){if(0===this.length)return d.empty();var b=this;return new g(this[0],function(){var a=b.slice(1);return void 0===a||0===a.length?d.empty():a.stream()})});"undefined"!==typeof module&&module.exports?module.exports=d:self.Stream=d})();
